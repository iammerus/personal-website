---
import DefaultLayout from '@layouts/DefaultLayout.astro'
import HeroSection from '@components/vue/HeroSection.vue'
import SkillsShowcase from '@components/vue/SkillsShowcase.vue'
import ProjectsShowcase from '@components/vue/ProjectsShowcase.vue'
import { loadResumeData, loadLinksData } from '../utils/resumeParser'
import fs from 'fs'
import path from 'path'

// Load resume and links data from JSON files
const resumeJsonPath = path.join(process.cwd(), 'data/resume.json')
const linksJsonPath = path.join(process.cwd(), 'data/links.json')

let resumeData;
let linksData;

try {
  const resumeContent = fs.readFileSync(resumeJsonPath, 'utf-8')
  const linksContent = fs.readFileSync(linksJsonPath, 'utf-8')
  resumeData = JSON.parse(resumeContent)
  linksData = JSON.parse(linksContent)
} catch (error) {
  console.error('Failed to load JSON data:', error)
  // Fallback to utility functions
  resumeData = loadResumeData()
  linksData = loadLinksData()
}
---

<DefaultLayout title="Melvin Mupondori - Senior Full-Stack Engineer" description="Senior Full-Stack Engineer with 5+ years of experience building scalable web solutions. Specializing in React, Vue.js, Node.js, and cloud architecture.">
  <!-- Hero Section -->
  <HeroSection
    client:load
    name={resumeData.personalInfo.name}
    title={resumeData.personalInfo.title}
    description={resumeData.profile.substring(0, 180) + '...'}
  />
  
  <!-- Skills Section -->
  <SkillsShowcase client:load />
  
  <!-- Projects Section -->
  <ProjectsShowcase client:load />
  
  <!-- Contact Section -->
  <section class="py-20 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6">
        Let's Work Together
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto mb-12">
        I'm always interested in new opportunities and exciting projects. 
        Whether you have a project in mind or just want to chat about technology, I'd love to hear from you.
      </p>
      
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a
          href={`mailto:${resumeData.personalInfo.email}`}
          class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          Get In Touch
        </a>
        
        <a
          href="/resume.pdf"
          download
          class="inline-flex items-center gap-2 px-8 py-4 border-2 border-blue-600 text-blue-600 rounded-lg font-medium hover:bg-blue-50 dark:hover:bg-blue-950 transition-all duration-300"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          Download Resume
        </a>
      </div>
    </div>
  </section>
</DefaultLayout>
